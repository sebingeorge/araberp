@model ArabErp.Domain.QuerySheet

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script> 

    $(document).ready(function () {

          //---------------------toastr---------------------------//
        toastr.options = {
            "positionClass": "toast-bottom-full-width",
            "timeOut": "5000",
            "extendedTimeOut": "2000"
        }
        if ('@TempData["success"]' != '') {
            toastr.success('@TempData["success"]');
        }
        else if ('@TempData["error"]' != '') {
            toastr.error('@TempData["error"]'.split('|')[0]);
            console.log('@TempData["error"]'.split('|')[1]);
        }
    @{ TempData["success"] = TempData["error"] = ""; }
        //------------------------------------------------------//
    })


    function Back() {
        location.href = '@Url.Action("Index")';
    }

    function Delete(id) {
        //alert(id);
        var url = '@Url.Action("Delete")';
        url += "/" + id;

        window.location = url;
    }


    $(function ()
    {
        $("#QuerySheetDate").datepicker({ dateFormat: "dd-MM-yy" });
    });
</script>


<div class="row">

    <div class="form-head1">
        <h4> Query Sheet</h4>
    </div>
    <div class="main-part pad1">

        @using (Html.BeginForm(null, null, FormMethod.Post))
        {
            @Html.HiddenFor(m => m.QuerySheetId)

            <div class="row form-group">

                    <div class="col-md-2">
                        <label for="QuerySheetRefNo">Query Sheet Ref No.</label>
                        @Html.TextBoxFor(m => m.QuerySheetRefNo, new { @class = "form_input", autocomplete = "off", @readonly = "readonly" })
                    </div>
                    <div class="col-md-2">
                        <label for="QuerySheetDate">Date</label>
                        @Html.TextBoxFor(m => m.QuerySheetDate, Model.QuerySheetDate.ToString("dd/MMMM/yyyy"), new { @class = "form_input ", autocomplete = "off", @readonly = "readonly" })
                    </div>

            </div>

            <hr />


            <div class="row form-group">

                <div class="col-md-3">
                    <label for="ProjectName">Project Name</label>
                    @Html.TextBoxFor(m => m.ProjectName, new { @class = "form_input", autocomplete = "off" })
                </div>

                <div class="col-md-3">
                     <label for="ContactPerson">Contact Person</label>
                     @Html.TextBoxFor(m => m.ContactPerson, new { @class = "form_input", autocomplete = "off" })
                </div>

                <div class="col-md-3">
                    <label for="ContactNumber">Contact Number</label>
                    @Html.TextBoxFor(m => m.ContactNumber, new { @class = "form_input", autocomplete = "off" })
                </div>

                <div class="col-md-3">
                    <label for="Email">Email</label>
                     @Html.TextBoxFor(m => m.Email, new { @class = "form_input", autocomplete = "off" })
                  </div>
            </div>
    <div class="row form-group">

    </div>

    <div class="table-responsive scroll2" style="overflow-x:scroll">
        <table class="table table-bordered" id="tab_logic" style="overflow-x:scroll;margin-bottom:0px">
            <thead>
                <tr class="grid_heading">
                    <th width="1%" class="text-center"></th>
                    <th width="2%" class="text-center"><h1>#</h1></th>
                    <th width="10%" nowrap><h1>Room Details</h1></th>
                    <th width="5%" nowrap><h1>External Room Dimension</h1></th>
                    <th width="5%" nowrap><h1>Cold Room Area</h1></th>
                    <th width="5%" nowrap><h1>Cold Room Location</h1></th>
                    <th width="5%"><h1>Temperature</h1></th>
                    <th width="5%" nowrap><h1>Panel Thickness</h1></th>
                    <th width="10%" nowrap><h1>Floor Details</h1></th>
                    <th width="10%" nowrap><h1>Product Details</h1></th>
                    <th width="5%" nowrap><h1>Product Incoming Temperature</h1></th>
                    <th width="5%" nowrap><h1>Pipe Length</h1></th>
                    <th width="5%"><h1>Refrigerant</h1></th>
                    <th width="5%" nowrap><h1>Electrical Power</h1></th>
                    <th width="5%" nowrap><h1>Door Size</h1></th>
                    <th width="5%"><h1>Kilowatt</h1></th>
                    <th width="5%"><h1>Unit</h1></th>
                    <th width="5%"><h1>Cost</h1></th>
                    <th width="1%" class="text-center"></th>

                </tr>
            </thead>
            <tbody>
                @for (int i = 0; i < Model.QuerySheetItems.Count; i++)
                {
                    <tr id="@i">
                        <td style="vertical-align:middle"><a class="glyphicon glyphicon-minus" style="top:0px" onclick="Delete(@i)"></a></td>
                        <td align="center">
                            <input type="hidden" id="Row_@i" />
                            <span id="slno@(i + 1)">@(i + 1)</span>
                            @Html.HiddenFor(m => Model.QuerySheetItems[i].QuerySheetItemId)
                        </td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].RoomDetails, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].ExternalRoomDimension, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].ColdRoomArea, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].ColdRoomLocation, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].TemperatureRequired, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].PanelThicknessANDSpec, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].FloorDetails, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].ProductDetails, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].ProductIncomingTemperature, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].PipeLength, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].Refrigerant, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].EletricalPowerAvailability, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].DoorSizeTypeAndNumberOfDoor, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].Kilowatt, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextAreaFor(m => Model.QuerySheetItems[i].Unit, new { @class = "form_input form_input-h", autocomplete = "off" })</td>
                        <td>@Html.TextBoxFor(m => Model.QuerySheetItems[i].Cost, new { @class = "form_input numbers-only", autocomplete = "off" })</td>
                        <td style="vertical-align:middle"><a id="add_row" class="glyphicon glyphicon-plus" style="top:0px" onclick="AddRow()"></a></td>
                    </tr>
                }

            </tbody>

        </table>
    </div>


            @Html.Partial("_ProjectCosting", Model)

            
            <div class="row">
                <div class="col-md-12 hrpart">
                    <input type="button" class="form-button right" value="Exit" onclick="Back()" />
                    @if (Model.isUsed)
                    {
                        <em class="perm">**Cannot delete/update because the query sheet is already used somewhere.</em>
                    }
                    else
                    {
                        <button type="submit" class="form-button right">Update</button>
                        <button type="button" class="form-button left" onclick="Delete('@Model.QuerySheetId')">Delete</button> 
                    }
                </div>
            </div>
        }
    </div>
</div>

